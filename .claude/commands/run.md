---
title: 'Shadcn Storybook Development - Task Execution'
read_only: true
type: 'command'
version: '1.0.0'
---

# 🎯 '/run' - Execute Shadcn Storybook development tasks with methodical analysis

Purpose: Perform methodical Next.js/Storybook development with CLAUDE.md adherence and mandatory quality gates
User Instruction: $ARGUMENTS

## 🚨 MANDATORY PRINCIPLES - NEVER VIOLATE

### ⛔ Three Core Principles

```
🚫 MANDATORY PRINCIPLES - NEVER VIOLATE 🚫
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1. 💥 Error Resolution Principle
   Must resolve all errors before proceeding to next step
   ⛔ NEVER proceed with unresolved issues

2. 🔍 Two-Failure Web Search Principle
   After two failed attempts to fix an error:
   ⛔ MUST perform 5 web searches to find and apply solutions

3. 🧠 Hard Think Principle
   Deep thinking and careful judgment at every step
   ⛔ NO superficial analysis or hasty decisions
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 🚨 Enhanced Error Protocol

```
🚨 MANDATORY ERROR HANDLING PROCEDURE
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Step 1: STOP immediately → Analyze error in detail
Step 2: First fix attempt (Hard Think based)
Step 3: If failed → Second fix attempt (different approach)
Step 4: If failed again → MANDATORY 5 web searches:
        - Exact error message search
        - Similar cases and solutions
        - Official documentation and best practices
        - Stack Overflow and GitHub Issues
        - Version/compatibility issues (Next.js, Storybook, React)
Step 5: Apply web search findings (third attempt)
Step 6: If still failing → Report to user with full details

⛔ NEVER skip this procedure and continue
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 🚨 최소 수정 원칙 - ABSOLUTE ANTI-OVERSPEC MANDATE

### ⛔ 최소한 수정만으로 문제 해결 - NEVER VIOLATE

```
🚫 최소 수정 절대 원칙 - NEVER VIOLATE 🚫
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1. 🎯 문제 범위 엄격 준수 원칙
   오직 사용자가 요청한 문제만 해결
   ⛔ 추가 기능, 리팩토링, 아키텍처 변경 절대 금지

2. 🔧 최소 변경 강제 원칙
   가능한 한 적은 파일, 적은 코드 라인만 수정
   ⛔ 전체 재작성, 과도한 최적화 절대 금지

3. 🚀 빠른 해결 우선 원칙
   완벽함보다는 빠른 문제 해결 우선
   ⛔ 과도한 품질 개선, 테스트 추가 금지 (요청 시만)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 🚨 오버스펙 위험 신호 감지

```
🚨 즉시 중단해야 할 오버스펙 위험 신호들
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
❌ "이 기회에 ~도 개선하면 좋겠다" 생각 → 즉시 중단
❌ "더 나은 아키텍처로 바꿔보자" 생각 → 즉시 중단
❌ "테스트를 더 추가해야겠다" 생각 → 즉시 중단
❌ "코드 스타일도 정리하자" 생각 → 즉시 중단
❌ "성능도 최적화하자" 생각 → 즉시 중단

✅ "정확히 이 문제만 해결하자" → 올바른 접근법
✅ "최소한으로만 수정하자" → 올바른 접근법
✅ "요청한 것만 구현하자" → 올바른 접근법
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 🔍 최소 수정 체크리스트

```
🔍 작업 전 최소 수정 확인 체크리스트
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
□ 요청 범위 정확 파악: 사용자가 요청한 것이 정확히 무엇인가?
□ 기존 코드 최대 활용: 새로 작성하지 말고 기존 코드 수정으로 해결?
□ 최소 파일 수정: 꼭 필요한 파일만 수정하는가?
□ Story 위치 고려: atoms/tokens/foundation/templates 중 어디에 해당?
□ 한 번에 하나씩: 여러 문제를 동시에 해결하려 하지 않는가?
□ 요청 외 개선 배제: 요청되지 않은 개선사항 제외했는가?

⛔ 모든 체크박스 완료 전까지 작업 진행 금지
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 📖 CLAUDE.md 필수 참조 가이드

**⚠️ 작업 실행 전 CLAUDE.md의 다음 섹션들을 반드시 읽고 숙지하세요:**

### 🔧 소스 코드 수정 시
- **"## 🔧 Source Code Modification Process"**
  - Requirements Analysis (요구사항 분석 및 문제 재현)
  - Task Planning (TodoWrite 도구로 작업 단계 기록)
  - Code Implementation (작은 단위로 집중 수정)
  - Thorough Validation (lint, format:check, test, registry:build)
  - Documentation Update (진행 내역 및 테스트 결과 업데이트)
  - Version Control (검증 후 커밋, Conventional Commits)

### 📋 작업 목록 관리 시
- **"## 📋 Task List Management Protocol"**
  - Task Execution ("Accept"/"Go" 승인 후 모든 작업 실행)
  - Decision Points (불확실성 증가 시 즉시 중단하고 옵션 제시)
  - Uncertainty Protocol (절대 추측 금지, 웹 검색으로 조사)
  - Completion Protocol (하위 작업 완료 즉시 표시, 상위 작업 완료 시 테스트→커밋)
  - 하위 작업을 의미 축약/축소 없이 최대한 자세히 서술

### 💬 의사소통 규칙
- **"## Communication Guidelines"**
  - 한국어: 주석, 문서, 사용자 응답
  - 영어: 코드 네이밍, 커밋 메시지 (Conventional Commits)
  - 이모지 활용: 🎯 목적, 🎭 임시 등
  - 함수 문서화: JSDoc에 `🎯 목적` 포함 필수

### 📚 Storybook Registry 특화
- **"## Development Workflow"**
  - src/registry/ 디렉토리 구조 (atoms/tokens/foundation/templates)
  - Registry 시스템 (registry.json, registryDependencies, dependencies)
  - @/ 경로 별칭 사용 (registry build system 의존성)
  - Story Structure Pattern (Meta, StoryObj, JSDoc 설명)

**💡 Tip**: Claude Code에게 "@CLAUDE.md의 Source Code Modification Process를 따르세요"라고 명시하면 6단계 프로세스를 준수합니다.

---

## Step 1: Mandatory Hard Think Pre-Analysis

### 🧠 Hard Think Verification Checklist:
```
🧠 HARD THINK MANDATORY CHECKLIST
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
□ Deep thinking completed: Next.js/Storybook 아키텍처 복잡성 분석?
□ Potential issues predicted: 빌드/테스트 병목 및 Registry 오류 미리 식별?
□ Alternative approaches reviewed: 여러 구현 솔루션 비교?
□ CLAUDE.md compliance verified: shadcn-storybook-registry 요구사항 이해?
□ Testing strategy planned: Vitest/Playwright 테스트 접근법 준비?
□ Dependencies mapped: shadcn/ui 컴포넌트 및 npm 의존성 명확?
□ Story structure clear: Meta, Story, JSDoc 패턴 이해?
□ Hasty decisions avoided: 분석에 충분한 시간 투자?

⛔ DO NOT proceed until ALL checkboxes complete
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## Step 2: Storybook Development Execution

### Shadcn Storybook Hard Think + Development-Test-Refactor Cycle:
```
🧠 SHADCN STORYBOOK HARD THINK + DEVELOPMENT-TEST-REFACTOR CYCLE
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
□ HARD THINK: Storybook 스토리 구조 및 Registry 시스템 심층 분석
□ DEVELOP: 기존 스토리 패턴 활용하여 구현 (@/components/ui/ import 필수)
□ TEST: Vitest 유닛 테스트 및 Playwright 브라우저 테스트 작성
□ REFACTOR: TypeScript 타입 안전성 및 JSDoc 주석 추가
□ VALIDATE: Storybook 개발 서버 실행 및 hot reload 검증

🚨 If error at any stage → Apply Error Protocol immediately
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## Step 3: Development Quality Gates

### Development Command Execution Matrix:
```
REQUIRED COMMANDS BY TASK TYPE:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
환경 설정:
   npm install

코드 품질:
   npm run lint → npm run format:check → npm run type-check

새 스토리 추가/수정:
   src/registry/atoms/[component]-story/ 작업
   npm run storybook (포트 6006에서 확인)
   npm run registry:build (registry.json 업데이트 후)

Registry 작업:
   registry.json 업데이트 (registryDependencies, dependencies 정의)
   npm run registry:build (public/v2/r/*.json 생성)
   npx shadcn@latest add http://localhost:3000/v2/r/[component]-story.json

테스트 작업:
   npm run test:unit (Vitest 유닛 테스트)
   npm run test:storybook (Playwright 브라우저 테스트)
   npm run storybook:test (Storybook 테스트 러너)

전체 빌드 및 검증:
   npm run build (Next.js + Storybook + Registry)

ALL TASKS:
   npm run lint → npm run type-check → npm run storybook

🚨 Command execution failure → Apply Error Protocol
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### Storybook Story Structure Guide:
```
📚 Storybook 스토리 구조 이해
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
디렉토리 구조 (src/registry/):
   - atoms/: 개별 컴포넌트 스토리 (button, input, card 등)
   - tokens/: 디자인 토큰 문서 (color, typography, spacing 등)
   - foundation/: 기초 컴포넌트
   - templates/: 완전한 템플릿 예제

스토리 파일 패턴:
   - 위치: src/registry/[category]/[component]-story/[component].stories.tsx
   - Import: @/components/ui/[component] (registry 빌드 필수)
   - Meta: title, component, tags, parameters 설정
   - Stories: Default, variant들 (Loading, Disabled, sizes 등)
   - JSDoc: 각 story export에 설명 주석 필수

Registry 등록 (registry.json):
   {
     "name": "[component]-story",
     "type": "registry:component",
     "title": "[Component] Story",
     "description": "Interactive Storybook stories for [component]",
     "categories": ["atoms", "storybook"],
     "registryDependencies": ["[component]"],  // shadcn/ui 컴포넌트
     "dependencies": ["lucide-react"],         // npm 패키지
     "files": [{
       "path": "src/registry/atoms/[component]-story/[component].stories.tsx",
       "type": "registry:component"
     }]
   }

테마 지원:
   - Light/dark 모드 지원 (addon-themes)
   - 모든 스토리는 양쪽 테마에서 정상 작동 필수

접근성:
   - a11y addon으로 접근성 검증
   - WCAG 2.1 AA 준수 목표
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## Step 4: Task Completion

### Development Completion Verification:
```
SHADCN STORYBOOK TASK COMPLETED: [Task Name]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ HARD THINK: Storybook 아키텍처 및 Registry 시스템 심층 분석 완료
✅ ERROR RESOLUTION: 모든 컴파일 및 빌드 오류 완전 해결
✅ DELIVERABLES: 구현 완료 (스토리 파일, registry.json 업데이트)
✅ COMPLIANCE: shadcn-storybook-registry 개발 표준 준수 (CLAUDE.md)
✅ VALIDATION: 테스트 통과, Storybook 정상 작동, 품질 게이트 클리어
✅ DOCUMENTATION: 변경사항 문서 반영

🧠 Next Development Task Requirements:
1. Maintain Hard Think mode: 심층 분석, 성급함 방지
2. Follow error resolution: 다음 단계 전에 모든 오류 수정
3. Apply two-failure rule: 2회 실패 후 5회 웹 검색
4. Ensure CLAUDE.md compliance: shadcn-storybook-registry 품질 표준 준수
5. Korean communication: 사용자와 한국어로 의사소통
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### Task Completion Protocol:
```
📋 작업 완료 프로토콜
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
모든 작업 완료 시 (순서대로):
   1. 전체 테스트 스위트 실행:
      npm run test:unit
      npm run test:storybook (필요 시)

   2. 품질 검증:
      npm run lint
      npm run type-check
      npm run format:check

   3. 빌드 검증:
      npm run registry:build (Registry 변경 시)
      npm run build

   4. 모든 검증 통과 후:
      git add .

   5. 정리:
      - 임시 파일 및 임시 코드 제거
      - console.log 등 디버그 코드 제거

   6. 커밋:
      git commit -m "feat: [작업 요약]" -m "[주요 변경사항]"
      # Conventional Commits 형식 사용 (feat:, fix:, refactor:, etc.)

⚠️  불확실성 프로토콜:
   - 구현 세부사항이 불확실하면 절대 추측하지 않음
   - 웹 검색으로 철저히 조사
   - 조사 후에도 불확실하면 사용자에게 명확한 설명 요청

⚠️  의사결정 지점:
   - 복잡성/불확실성 증가 시 즉시 중단
   - 주니어 개발자 친화적 설명으로 옵션 제시
   - 사용자 결정 대기 후 진행
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

### 🚨 Emergency Protocol

```
🚨 SHADCN STORYBOOK DEVELOPMENT ERROR EMERGENCY PROCEDURE
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1) HALT immediately
2) REPORT error details (Next.js, TypeScript, Storybook, Registry build 등)
3) WEB SEARCH after 2 failures (5 searches)
4) RESTART only after complete resolution

⛔ NEVER proceed without this procedure
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 🌐 언어 및 의사소통 원칙

```
🌐 프로젝트 언어 원칙
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 사용자와의 의사소통: 한국어 사용
✅ 작업 설명 및 보고: 한국어로 명확하고 간결하게
✅ 오류 및 해결책 설명: 주니어 개발자도 이해 가능한 한국어
✅ 코드 주석 및 JSDoc: 영어 사용
✅ Git 커밋 메시지: 영어 사용 (Conventional Commits)

⚠️  의사결정 지점에서는 주니어 개발자 친화적인 한국어 설명 제공
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**📖 Project Commands Reference**: [CLAUDE.md](../../CLAUDE.md)

**🧠 Core Rule: Hard Think First → Resolve All Errors → Two Failures = 5 Web Searches → Complete Resolution Before Next Step → Korean Communication → CLAUDE.md Compliance**
