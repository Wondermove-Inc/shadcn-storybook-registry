---
title: 'Shadcn Storybook Planning - Practical & Scope-Focused Planning System'
read_only: true
type: 'command'
version: '2.0.0'
---

# 🎯 '/plan' - Execute practical development planning with scope control

Purpose: Create realistic, implementable plans based on actual codebase analysis and user requirements
User Instruction: $ARGUMENTS

## 🎯 Planning Mission

**PLAN**: Analyze current codebase → Identify actual requirements → Create implementable plan
**GOAL**: Deliver scope-controlled, realistic development plan with clear user decision points
**METRIC**: 100% requirement coverage, clear 필수/옵션 distinction, implementable action items

## 🚨 오버스펙 방지 필수 원칙 - NEVER VIOLATE

### ⛔ Three Anti-Overspec Principles

```
🚫 오버스펙 방지 필수 원칙 - 최소한의 수정만으로 문제해결 🚫
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1. 🎯 요청 범위 엄격 준수 원칙
   사용자가 요청한 내용만 계획에 포함
   ⛔ 추가 기능, 리팩토링, 아키텍처 변경 절대 금지

2. 🔧 최소 수정 강제 원칙 ⭐ 핵심 원칙 ⭐
   반드시 최소한의 파일과 코드만 수정하여 문제 해결
   ⛔ 전면 재작성, 과도한 최적화, 불필요한 개선 절대 금지

3. 📋 현실적 계획 수립 원칙
   실제 코드베이스 분석 후 검증 가능한 계획만 수립
   ⛔ 추상적이거나 검증되지 않은 계획 절대 금지

4. 🤝 사용자 의사결정 존중 원칙
   필수 vs 옵션 명확 구분하여 선택권 완전 보장
   ⛔ 모든 것을 필수로 강요하거나 임의 확장 절대 금지
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 🧠 Hard Think Simplified Checklist:
```
🧠 최소 수정 중심 HARD THINK 체크리스트
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
□ Git 상태 확인 및 커밋 완료: 작업 디렉토리가 클린 상태인가?
□ 요청 범위 엄격 준수: 사용자가 실제로 요청한 것만 정확히 파악했는가?
□ ⭐ 최소 수정 방법 탐색: 가장 적은 파일과 코드로 해결 가능한 방법 찾았는가?
□ 기존 코드 최대 활용: 새로 작성하지 말고 기존 코드 수정으로 해결 가능한가?
□ 변경 영향도 최소화: 꼭 필요한 파일들만 수정하도록 계획했는가?
□ 구현 가능성 검토: 현재 기술 스택으로 최소 수정만으로 실제 구현 가능한가?
□ 필수/옵션 엄격 구분: 꼭 필요한 것과 불필요한 개선사항 명확히 분류했는가?
□ ⭐ 오버스펙 완전 차단: 요청 범위를 벗어난 모든 계획 완전히 제외했는가?

⛔ 모든 체크박스 완료 전까지 계획 수립 절대 금지
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## Step 0: Git 상태 확인 및 커밋 (필수 전제조건)

### 🔒 계획 실행 전 필수 Git 워크플로우

```
🚨 계획 실행 전 필수 Git 상태 확인 절차
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⛔ 모든 계획 실행 전에 반드시 수행할 Git 워크플로우:

1. 현재 Git 상태 확인:
   git status

2. 커밋되지 않은 변경사항이 있는 경우:
   • 변경사항 검토 및 분석
   • 의미 있는 변경사항이면 즉시 커밋 수행
   • 불필요한 변경사항이면 git restore로 되돌리기

3. 커밋 가능한 변경사항 처리:
   git add [변경된 파일들]
   git commit -m "descriptive message"

4. 작업 디렉토리 클린 상태 확인:
   git status (clean working directory 확인)

⚠️  주의사항:
- 계획 실행 중 충돌 방지를 위해 반드시 클린 상태에서 시작
- 의미 있는 변경사항은 절대 유실하지 말고 커밋 보존
- 작업 진행 중 정기적으로 git status 확인
- Conventional Commits 형식 준수 (feat:, fix:, chore:, docs:, test:, refactor:)

🚨 Git 상태가 클린하지 않으면 계획 실행 금지
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## Step 1: 현실적 요구사항 분석

### 🔍 현재 상태 분석 & 요구사항 확인

```
📋 실제 코드베이스 분석 절차
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1. 프로젝트 구조 파악:
   • Next.js 15 + Storybook 9 구조 확인
   • package.json 의존성 및 스크립트 분석
   • Registry 시스템 (registry.json, components.json) 파악
   • src/registry/ 디렉토리 구조 (atoms, tokens, foundation, templates)
   • 기존 스토리 패턴 및 컨벤션 파악

2. 요구사항 명확화:
   • 사용자가 실제로 요청한 것 정확히 파악
   • 현재 구현 상태 vs 목표 상태 비교
   • 꼭 변경해야 할 것 vs 개선하면 좋을 것 구분

3. 변경 영향도 분석:
   • 수정이 필요한 파일들 식별
   • Registry 의존성 (registryDependencies, dependencies) 파악
   • Storybook 빌드 및 테스트에 미치는 영향 평가
   • CLAUDE.md 표준 준수 여부 확인
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 🔍 변경 영향도 분석 템플릿

```
🔍 변경 영향도 분석 결과
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📁 영향받는 파일들: [구체적 파일 경로 목록]
📦 영향받는 컴포넌트: [shadcn/ui 컴포넌트들]
🔗 Registry 의존성 변경: [registry.json, components.json 등]
📚 스토리 카테고리: [atoms/tokens/foundation/templates 중 어디?]
⚠️  위험 요소: [호환성, 브레이킹 체인지, Storybook 빌드 영향 등]
🧪 필요한 테스트: [최소한의 필수 검증만]
📚 문서 업데이트: [실제 변경이 필요한 문서만]
⏱️  예상 작업 시간: [현실적 시간 예측]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## Step 2: 실용적 계획 수립

### 🚨 필수 계획 (원래 요청 사항)

```
🚨 필수 대응 계획 - 사용자 요청 사항
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1. [핵심 요청사항 1]
   - 구현 방법: [구체적 구현 방안, 파일 경로 명시]
   - 영향 파일: [수정이 필요한 파일들]
   - Registry 변경: [registry.json, components.json 업데이트 필요 여부]
   - 예상 시간: [현실적 작업 시간]
   - 위험도: [낮음/중간/높음 + 구체적 위험요소]

2. [핵심 요청사항 2]
   - 구현 방법: [구체적 구현 방안]
   - 영향 파일: [수정이 필요한 파일들]
   - Registry 변경: [registry.json 업데이트 필요 여부]
   - 예상 시간: [현실적 작업 시간]
   - 위험도: [낮음/중간/높음 + 구체적 위험요소]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 💡 옵션 계획 (추가 개선 사항)

```
💡 옵션 개선 계획 - 사용자 선택사항
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1. [개선 제안 1]
   - 효과: [구체적 개선 효과]
   - 작업량: [예상 작업 시간]
   - 우선순위: [높음/중간/낮음]
   - 선택 이유: [왜 이 개선이 도움이 되는가]

2. [개선 제안 2]
   - 효과: [구체적 개선 효과]
   - 작업량: [예상 작업 시간]
   - 우선순위: [높음/중간/낮음]
   - 선택 이유: [왜 이 개선이 도움이 되는가]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### ❓ 사용자 의사결정 지점

```
❓ 의사결정이 필요한 사항들
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔄 기술 선택이 필요한 경우:
   - 옵션 A: [방법1] - 장점: [구체적 장점] / 단점: [구체적 단점]
   - 옵션 B: [방법2] - 장점: [구체적 장점] / 단점: [구체적 단점]
   - 권장사항: [추천하는 선택과 이유]

🎯 범위 결정이 필요한 경우:
   - 최소 구현: [기본 기능만] - 시간: [X시간]
   - 표준 구현: [일반적 수준] - 시간: [Y시간]
   - 확장 구현: [추가 기능 포함] - 시간: [Z시간]
   - 권장사항: [추천하는 범위와 이유]

⚠️  복잡성/불확실성 증가 시 즉시 중단하고 사용자에게 선택지 제시
⚠️  주니어 개발자도 이해 가능한 명확한 설명 제공
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## Step 3: 실행 계획 완료 확인

### ✅ 계획 수립 완료 기준

```
✅ 계획 수립 완료 체크리스트
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
□ Git 상태 확인 및 커밋 완료: 작업 디렉토리가 클린 상태인가?
□ 요청 범위 명확히 파악: 사용자가 원하는 것이 정확히 무엇인가?
□ 현재 코드 구조 분석 완료: 실제 프로젝트 상태 파악했는가?
□ 필수 vs 옵션 계획 구분: 꼭 해야 할 것과 선택사항 분리했는가?
□ 변경 영향도 분석 완료: 수정 파일과 연관 컴포넌트 파악했는가?
□ 구현 가능성 검증: 현재 기술로 실제 구현 가능한가?
□ 사용자 의사결정 지점 명시: 선택이 필요한 부분 명확히 했는가?
□ CLAUDE.md 준수: shadcn-storybook-registry 개발 표준 따르는가?

🎯 결과: 바로 실행 가능한 구체적 계획 + 명확한 선택지들
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 🛠️ Shadcn Storybook 개발 도구 및 명령어

```
🛠️ Shadcn Storybook 프로젝트 필수 도구 및 명령어
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
설치 및 의존성:
- npm install                  # 의존성 설치
- bun install                  # bun 사용 시

개발:
- npm run storybook            # Storybook 개발 서버 (포트 6006)
- npm run dev                  # Next.js 개발 서버 (Turbopack)
- npm run registry:dev         # Registry 자동 재빌드 (watch 모드)

빌드:
- npm run build                # Next.js + Storybook + Registry 전체 빌드
- npm run registry:build       # Registry JSON 파일 생성 (public/v2/r/*.json)
- npm run storybook:build      # Storybook 정적 빌드만

코드 품질:
- npm run lint                 # ESLint 검사
- npm run format:check         # Prettier 포맷 검사
- npm run format:write         # Prettier 자동 포맷팅
- npm run type-check           # TypeScript 타입 검증

테스트:
- npm run test                 # 전체 테스트 실행
- npm run test:unit            # 유닛 테스트만
- npm run test:storybook       # Storybook 브라우저 테스트 (Playwright)
- npm run storybook:test       # Storybook 테스트 러너

Registry 테스트:
- npx shadcn@latest add http://localhost:3000/v2/r/button-story.json

⚠️  사용 원칙:
- 실제 필요한 도구만 사용 (과도한 도구 사용 금지)
- 변경이 있을 때만 테스트/빌드 실행
- 사용자가 요청하지 않은 품질 검사 생략
- Registry 변경 시 반드시 registry:build 실행
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 📖 CLAUDE.md 필수 참조 가이드

**⚠️ 계획 수립 전 CLAUDE.md의 다음 섹션들을 반드시 읽고 숙지하세요:**

### 🎯 계획 수립 시
- **"## 📋 Task List Creation Guidelines (docs/plan)"**
  - Phase 1: High-Level Tasks (4-6개 상위 작업 도출)
  - Phase 2: Detailed Tasks (사용자 승인 후에만 작성)
  - **사용자 승인 없이 구현 시작 금지**
  - 상위 작업은 주니어 개발자가 따라할 수 있도록 친절하고 상세하게 작성
  - docs/plan/active/ 디렉토리에 YYYY-MM-DD-[작업명].md 형식으로 저장

### 🚀 계획 실행 시
- **"## 📋 Task List Management Protocol"**
  - Full Task Execution ("Accept"/"Go" 승인 후 전체 실행)
  - Decision Points (의사결정 필요 시 중단하고 옵션 제시)
  - Completion Protocol (상위 작업 완료 시 테스트→정리→커밋)
  - 하위 작업 완료 즉시 TodoWrite로 completed 표시
  - 모든 하위 작업 완료 시 상위 작업 completed 표시

### 🔧 코드 수정 시
- **"## 🔧 Source Code Modification Process"**
  - 6단계 프로세스 (분석→계획→구현→검증→문서화→커밋)
  - Thorough Validation (lint, type-check, test, registry:build)
  - Conventional Commits 형식
  - 불확실할 경우 최소 2회 웹 검색으로 정보 확보
  - 여러 해결책 존재 시 사용자에게 옵션 제시

### 📝 문서 작성 규칙
- **"## Communication Guidelines"**
  - 한국어: 코드 주석, 문서, 사용자 응답
  - 영어: 코드 네이밍, 커밋 메시지 (Conventional Commits)
  - 이모지 활용: 🎯 목적, 🎭 임시, 🔧 수정 등

**💡 Tip**: Claude Code에게 "@CLAUDE.md의 [섹션 제목]을 참조하세요"라고 요청하면 즉시 해당 섹션을 읽습니다.

---

## 최종 계획 완료 보고서

### 📋 계획 수립 완료 보고서 템플릿

```
실용적 계획 수립 완료: [Task Name]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 분석 완료 사항:
✅ 요청 범위 분석: [구체적 요청 내용]
✅ 현재 상태 파악: [프로젝트 현재 구조 및 상태]
✅ 변경 영향도: [영향받는 파일/컴포넌트들과 의존성]

🚨 필수 실행 계획 (고수준 작업 4-6개):
1. [핵심 작업 1] - 예상시간: [X시간] - 위험도: [낮음/중간/높음]
2. [핵심 작업 2] - 예상시간: [Y시간] - 위험도: [낮음/중간/높음]
...

💡 옵션 개선 계획:
1. [개선사항 1] - 효과: [구체적 효과] - 작업량: [Z시간]
2. [개선사항 2] - 효과: [구체적 효과] - 작업량: [W시간]

❓ 사용자 결정 대기:
- [의사결정 필요 사항 1]: 옵션 A vs 옵션 B
- [의사결정 필요 사항 2]: 최소 vs 표준 vs 확장 구현

🎯 다음 단계:
1. 사용자 승인 대기
2. 승인 후 작업 시작
3. 실행 계획 확정 및 작업 진행
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 🔧 오버스펙 방지 점검사항

```
🔧 최소 수정 원칙 최종 점검 - 절대 위반 금지
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
□ 사용자 요청 범위 엄격 준수: 추가 기능 제안 완전 배제, 요청사항만 포함?
□ ⭐ 최소 파일 수정 확인: 가능한 한 적은 수의 파일만 수정 계획?
□ ⭐ 기존 코드 최대 활용: 새로 작성하지 말고 기존 코드 수정으로 해결?
□ 과도한 도구 사용 완전 배제: 꼭 필요한 최소한의 도구만 포함?
□ 사용자 선택권 완전 보장: 필수와 옵션 명확히 구분, 강요 없음?
□ 즉시 실행 가능 계획: 추상적이지 않고 바로 구현 가능한 구체적 계획?

🚨 즉시 중단해야 할 오버스펙 위험 신호:
❌ 사용자가 언급하지 않은 기술 스택, 라이브러리, 프레임워크 추가
❌ 과도한 테스트, 품질 검증, 코드 리뷰 절차 추가
❌ 복잡한 아키텍처 재설계, 리팩토링, 구조 변경 제안
❌ 성능, 보안, UI/UX 등 요청되지 않은 개선사항 포함
❌ "이 기회에 ~도 개선하면" 같은 확장 제안
❌ 전면 재작성이나 대규모 변경 계획

✅ 올바른 최소 수정 접근법:
✅ "정확히 요청된 문제만 해결"
✅ "최소한의 변경으로 빠른 해결"
✅ "기존 코드 패턴 그대로 활용"
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

### 🚨 Emergency Protocol

```
🚨 계획 수립 오류 시 비상 절차
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1) 즉시 중단: 오버스펙 또는 범위 벗어남 감지 시
2) 문제 분석: 요청 범위 재확인, 코드 분석 누락 점검
3) 2회 실패 시: 5회 웹 검색으로 해결방안 모색
4) 범위 재조정: 사용자 요청에 맞게 계획 범위 축소
5) 완전 해결 후 재시작: 오버스펙 위험 제거 후 진행

⛔ 오버스펙 위험이 남아있으면 절대 진행 금지
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 🌐 언어 및 의사소통 원칙

```
🌐 프로젝트 언어 원칙
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 사용자와의 의사소통: 한국어 사용
✅ 계획 문서 작성: 주니어 개발자도 이해 가능한 간단한 한국어
✅ 계획 설명 및 보고: 한국어로 명확하고 간결하게
✅ 코드 주석 및 JSDoc: 영어 사용
✅ Git 커밋 메시지: 영어 사용 (Conventional Commits)

⚠️  의사결정 지점에서는 주니어 개발자 친화적인 한국어 설명 제공
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**📖 Project Commands Reference**: [CLAUDE.md](../../CLAUDE.md)

**🧠 Core Rule: 요청 범위 우선 → 최소 수정 원칙 → 필수/옵션 구분 → 한국어 의사소통 → CLAUDE.md 준수**
